!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.cimo=e():t.cimo=e()}(window,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=1)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.kFillRectTag=e.kSetFillStyleTag=e.kFileVersion=e.kFileTag=void 0,e.kFileTag=[89,69,90,73],e.kFileVersion=[0,1],e.kSetFillStyleTag=100,e.kFillRectTag=110},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.Renderer=e.Decoder=e.Encoder=void 0;var o=r(2),a=r(3),s=r(4),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(o.Encoder);e.Encoder=u;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(a.Decoder);e.Decoder=p;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(s.Renderer);e.Renderer=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Encoder=void 0;var n=r(0),i=function(t){return[(t=Math.round(t))>>8&255,255&t]},o=function(t){return[(t=Math.round(t))>>16&255,t>>8&255,255&t]},a=function(){function t(t){this.options=t,this.frames=[[]]}return t.prototype.getMetaData=function(){var t=[];if(t.push.apply(t,i(this.options.width)),t.push.apply(t,i(this.options.height)),t.push(1==this.options.animation?1:0),t.push(void 0!==this.options.fps?this.options.fps:0),t.length<32)for(var e=t.length;e<32;e++)t.push(0);return t},t.prototype.setFillStyle=function(t,e,r,o){var a=this.frames[this.frames.length-1];a.push.apply(a,i(n.kSetFillStyleTag)),a.push.apply(a,i(4)),a.push(t,e,r,o)},t.prototype.fillRect=function(t,e,r,o){var a=this.frames[this.frames.length-1];a.push.apply(a,i(n.kFillRectTag)),a.push.apply(a,i(8)),a.push.apply(a,i(t)),a.push.apply(a,i(e)),a.push.apply(a,i(r)),a.push.apply(a,i(o))},t.prototype.endFrame=function(){this.frames.push([])},t.prototype.build=function(){var t=[];return t.push.apply(t,n.kFileTag),t.push.apply(t,n.kFileVersion),t.push.apply(t,this.getMetaData()),this.frames.forEach((function(e,r){var n=[];n.push.apply(n,o(r)),n.push.apply(n,o(e.length)),n.push.apply(n,e),t.push.apply(t,n)})),new Uint8Array(t)},t}();e.Encoder=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Decoder=void 0;var n=function(t){return 256*t[0]+t[1]},i=function(t){return 256*t[0]*256+256*t[1]+t[2]},o=function(){function t(t){if(this.data=t,this.frames=[],89!==t[0]||69!==t[1]||90!==t[2]||73!==t[3])throw"Invalid header check.";if(n([t[4],t[5]])>1)throw"Invalid version check.";this.readMetaData(),this.readFrames()}return t.prototype.readMetaData=function(){var t=this.data.subarray(6,38);this.width=n(t.subarray(0,2)),this.height=n(t.subarray(2,4)),this.animation=1==t[4],this.fps=t[5]},t.prototype.readFrames=function(){for(var t=38;t<this.data.length;){var e=i([this.data[t],this.data[t+1],this.data[t+2]]),r=i([this.data[t+3],this.data[t+4],this.data[t+5]]),n=this.data.subarray(t+6,t+6+r);this.frames[e]=n,t+=6+r}},t}();e.Decoder=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Renderer=void 0;var n=r(0),i=function(t){return 256*t[0]+t[1]},o=function(){function t(t,e){this.decoder=t,this.renderingContext=e,this.decoder.width&&this.decoder.height&&(e.canvas.width=this.decoder.width,e.canvas.height=this.decoder.height),this.paint(0)}return t.prototype.paint=function(t){this.renderingContext.clearRect(0,0,this.renderingContext.canvas.width,this.renderingContext.canvas.height);var e=this.decoder.frames[t];console.log(this.decoder.frames);for(var r=0;r<e.length;){var o=i([e[r],e[r+1]]),a=i([e[r+2],e[r+3]]),s=e.subarray(r+4,r+4+a);if(o==n.kSetFillStyleTag){var u={r:s[0],g:s[1],b:s[2],a:s[3]},p=u.r,l=u.g,c=u.b,h=u.a;console.log("rgba("+p+","+l+","+c+","+h/255+")"),this.renderingContext.fillStyle="rgba("+p+","+l+","+c+","+h/255+")"}else if(o==n.kFillRectTag){var f={x:i([s[0],s[1]]),y:i([s[2],s[3]]),width:i([s[4],s[5]]),height:i([s[6],s[7]])},d=f.x,y=f.y,v=f.width,g=f.height;console.log("fillRect"),this.renderingContext.fillRect(d,y,v,g)}r+=4+a}},t}();e.Renderer=o}])}));